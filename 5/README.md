# Домашнее задание к занятию "Протокол обмена данными OPC"

### Цель задания

1. Применить на практике знания, полученные в ходе лекции.
2. Научиться настраивать подключение устройств Modbus Slave к серверу OPC.
3. Получить опыт подключения программы-клиента OPC к серверу OPC и вывода данных из сервера.

Выполнив это задание, вы сможете:
* создавать проекты для обмена данными в программе MasterOPC Universal Modbus Server;
* производить подключение программы-клиента MatrikonOPC Explorer к имеющимся в системе серверам OPC и анализировать полученные данные.

------

### Чеклист готовности к домашнему заданию

1. Скачаны и установлены программы ModbusSlave, MasterOPC Universal Modbus Server, Matrikon OPC Explorer, UaExpert.

Ссылки на скачивание:

 [Modbus Slave Install 64bit](https://www.modbustools.com/download/ModbusSlaveSetup64Bit.exe "ModbusSlave Install 64bit") [Modbus Slave Install 32bit](https://www.modbustools.com/download/ModbusSlaveSetup32Bit.exe "ModbusSlave Install 32bit")
 
 [MasterOPC Universal Modbus Server](https://drive.google.com/file/d/1gKj-W5g06wFmacTKTg7TA-25U2k4xI9t/view?usp=sharing "MasterOPC Universal Modbus Server (Zip)")
 
 [Matrikon OPC Explorer](https://drive.google.com/file/d/1G50COfrtY2KkFmSVi16BuPSSWetK0sje/view?usp=sharing "Matrikon OPC Explorer")
 
 [Matrikon OPC HDA Explorer](https://drive.google.com/file/d/1JyQjTRuLhzjpsNQ7sxk_vD_42GMxfV6P/view?usp=sharing "Matrikon OPC HDA Explorer")
 
 **ВНИМАНИЕ!** Устанавливаются демо-версии программ; их функционал будет ограничен спустя 30 дней после установки.
 Производите установку программ **только** непосредственно перед началом выполнения задания.

2. Скачан графический файл Profibus_Profinet.png, имеется программа для просмотра данного файла с возможностью увеличения отдельных фрагментов изображения.

Ссылка на скачивание: [Profibus_Profinet.png](https://drive.google.com/file/d/1pArECMEBFeFQfWtAh7QR4wVM4zCl-pvH/view?usp=sharing "Profibus_Profinet")

------

### Инструкция к выполнению домашнего задания

1. Сделайте копию [Шаблона для домашнего задания](https://docs.google.com/document/d/1youKpKm_JrC0UzDyUslIZW2E2bIv5OVlm_TQDvH5Pvs/edit) себе на Google Disk.
2. В названии файла введите корректное название лекции и вашу фамилию и имя.
3. Зайдите в “Настройки доступа” и выберите доступ “Просматривать могут все в Интернете, у кого есть ссылка”.
 Ссылка на инструкцию [Как предоставить доступ к файлам и папкам на Google Диске](https://support.google.com/docs/answer/2494822?hl=ru&co=GENIE.Platform%3DDesktop)
5. Скопируйте текст задания в свой документ.
6. Выполните домашнее задание, запишите ответы и приложите необходимые скриншоты в свой Google Doc.
7. Для проверки домашнего задания преподавателем отправьте ссылку на ваш документ в личном кабинете.
8. Любые вопросы по решению задач задавайте в чате учебной группы.

------

### Задание 1

Производитель комплексного прибора, измеряющего параметры окружающей среды (температуру воздуха, атмосферное давление, относительную влажность, скорость ветра), предоставил данные для связи с этим устройством по Modbus RTU:

Температура - 30005
Давление - 30006
Влажность - 30008
Скорость ветра - 30009

Инженеру АСУТП в программе MasterOPC Universal Modbus Server необходимо создать новый рабочий проект с конфигурацией, позволяющей установить связь с двумя экземплярами виртуальной модели этого прибора, имеющими следующие параметры:

Экземпляр 1:

Протокол - Modbus TCP
Slave ID = 7
Port = 504

Экземпляр 2:

Протокол - Modbus TCP
Slave ID = 8
Port = 505

Для проверки работоспособности этой конфигурации необходимо запустить два экземпляра программы Modbus Slave, в каждом из которых необходимо создать виртуальное устройство с указанными выше параметрами, присвоив им следующие значения (единицы измерения не вносятся в конфигурацию, они даны для пояснения):

Экземпляр 1:

Температура = 18 (градусов)
Давление = 99 (кПа)
Влажность = 60 (%)
Скорость ветра = 2 (м/с)

Экземпляр 2: 

Температура = 22 (градусов)
Давление = 101 (кПа)
Влажность = 80 (%)
Скорость ветра = 4 (м/с)

Убедиться в работоспособности схемы "Сервер OPC - два экземпляра виртуальных приборов", произведя их соединение (для сервера - выбором команды "Старт", для каждого их экземпляров Modbus Slave - переводом в статус "Connected") и убедившись в идентичности отправляемых и получаемых данных.

Ответ привести в виде файлов конфигурации, созданных в программах MasterOPC Universal Modbus Server и Modbus Slave (каждого из экземпляров).
Файлы конфигурации необходимо сохранить в Google Drive, сделав их доступными для загрузки.
В документе, созданном для выполнения ДЗ, привести ссылки на данные файлы.
В названиях файлов конфигурации указать фамилию, имя студента и лекцию, к которой относится ДЗ, следующим образом: StudentName_LectureN.*
(например, IvanovPetr_Lecture2_4.mbs)

------

### Задание 2

При помощи программы 

Ответ привести в виде списка найденных ошибок для корректировки схемы.

------

### Задание 3 (необязательное)

В программе MasterOPC Universal Modbus Server в работчий проект внести изменения, позволяющие включить в работу сервер OPC UA.
Скачать и установить программу UaExpert ([UaExpert](https://drive.google.com/file/d/1CZj7ETnsDMord99d8uf_zDaggcIUpwsd/view?usp=sharing "UaExpert")).
Подключиться с ее помощью к серверу OPC UA.

Ответ привести в виде списка найденных ошибок для корректировки схемы.

------

### Критерии оценки

1. Задание 1 считается выполненным, если при загрузке конфигураций в программы Modbus Poll, Modbus Slave и включении режима "Connect" происходит корректный обмен запросами от Master и ответами от Slave, а на основных экранах выдаются указанные в условии значения параметров.
2. Задание 2 считается выполненным, если найдено 10 и более ошибок в схеме.

Примечание: С примером заполненного шаблона домашнего задания и подробной инструкцией можно ознакомиться по [ссылке](https://docs.google.com/document/d/13m07fqimLwzddcF6zyRrPjMO16RGynagzdO64-PMXuA/edit?usp=sharing).

